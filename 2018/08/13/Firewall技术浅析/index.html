<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="google-site-verification" content="wCoNEhJPwtNoql5k0PfiYmMR-rgvliWvNZyGItcI3w0" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-flash.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Firewall," />





  <link rel="alternate" href="/atom.xml" title="Firehacker" type="application/atom+xml" />






<meta name="description" content="防火墙(firewall)是一种保护计算机网络安全的技术性措施，它通过在网络边界上建立相应的网络通信监控系统来隔离内部和外部网络，以阻挡来自外部的网络入侵。本文对防火墙技术及其发展进行简要分析与总结">
<meta name="keywords" content="Firewall">
<meta property="og:type" content="article">
<meta property="og:title" content="Firewall技术浅析">
<meta property="og:url" content="http://yoursite.com/2018/08/13/Firewall技术浅析/index.html">
<meta property="og:site_name" content="Firehacker">
<meta property="og:description" content="防火墙(firewall)是一种保护计算机网络安全的技术性措施，它通过在网络边界上建立相应的网络通信监控系统来隔离内部和外部网络，以阻挡来自外部的网络入侵。本文对防火墙技术及其发展进行简要分析与总结">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://pdeise3e3.bkt.clouddn.com/%E7%A4%BA%E6%84%8F%E5%9B%BE.png">
<meta property="og:image" content="http://pdeise3e3.bkt.clouddn.com/%E9%98%B2%E7%81%AB%E5%A2%99%E5%8F%91%E5%B1%95.png">
<meta property="og:image" content="http://pdeise3e3.bkt.clouddn.com/%E5%85%B3%E7%B3%BB.png">
<meta property="og:image" content="http://pdeise3e3.bkt.clouddn.com/%E9%9D%99%E6%80%81.png">
<meta property="og:image" content="http://pdeise3e3.bkt.clouddn.com/%E5%8A%A8%E6%80%81.png">
<meta property="og:image" content="http://pdeise3e3.bkt.clouddn.com/%E7%94%B5%E8%B7%AF%E7%BA%A7.png">
<meta property="og:image" content="http://pdeise3e3.bkt.clouddn.com/%E7%94%B5%E8%B7%AF%E7%BA%A7%E4%BD%8D%E7%BD%AE.png">
<meta property="og:image" content="http://pdeise3e3.bkt.clouddn.com/%E5%BA%94%E7%94%A8%E9%80%BB%E8%BE%91.png">
<meta property="og:image" content="http://pcdbq4c2i.bkt.clouddn.com/%E5%BA%94%E7%94%A8%E5%B1%82%E6%AC%A1.png">
<meta property="og:image" content="http://pcdbq4c2i.bkt.clouddn.com/%E5%88%87%E6%8D%A2%E4%BB%A3%E7%90%86.png">
<meta property="og:image" content="http://pcdbq4c2i.bkt.clouddn.com/%E5%B1%8F%E8%94%BD%E4%B8%BB%E6%9C%BA%E6%A8%A1%E5%BC%8F.png">
<meta property="og:image" content="http://pcdbq4c2i.bkt.clouddn.com/%E5%A4%9A%E5%AE%BF%E4%B8%BB.png">
<meta property="og:image" content="http://pcdbq4c2i.bkt.clouddn.com/%E5%B1%8F%E8%94%BD%E5%AD%90%E7%BD%91.png">
<meta property="og:image" content="http://pcdbq4c2i.bkt.clouddn.com/windows.png">
<meta property="og:updated_time" content="2018-08-21T11:41:03.502Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Firewall技术浅析">
<meta name="twitter:description" content="防火墙(firewall)是一种保护计算机网络安全的技术性措施，它通过在网络边界上建立相应的网络通信监控系统来隔离内部和外部网络，以阻挡来自外部的网络入侵。本文对防火墙技术及其发展进行简要分析与总结">
<meta name="twitter:image" content="http://pdeise3e3.bkt.clouddn.com/%E7%A4%BA%E6%84%8F%E5%9B%BE.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/08/13/Firewall技术浅析/"/>





  <title>Firewall技术浅析 | Firehacker</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>
	
	<a href="https://github.com/Hackerfire" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Firehacker</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description"></h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-aisec">
          <a href="/AISec/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-eye"></i> <br />
            
            AISec
          </a>
        </li>
      
        
        <li class="menu-item menu-item-community">
          <a href="/community/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-users"></i> <br />
            
            社区
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tools">
          <a href="/tools/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-wrench"></i> <br />
            
            工具
          </a>
        </li>
      
        
        <li class="menu-item menu-item-links">
          <a href="/links" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-link"></i> <br />
            
            友链
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/13/Firewall技术浅析/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Firehacker">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Firehacker">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">Firewall技术浅析</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-13T18:16:00+08:00">
                2018-08-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/0x02-安全技术/" itemprop="url" rel="index">
                    <span itemprop="name">0x02 安全技术</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/0x02-安全技术/网络安全/" itemprop="url" rel="index">
                    <span itemprop="name">网络安全</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/08/13/Firewall技术浅析/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/08/13/Firewall技术浅析/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>防火墙(firewall)是一种保护计算机网络安全的技术性措施，它通过在网络边界上建立相应的网络通信监控系统来隔离内部和外部网络，以阻挡来自外部的网络入侵。本文对防火墙技术及其发展进行简要分析与总结</p>
</blockquote>
<a id="more"></a>
<hr>
<h2 id="0x01-概述"><a href="#0x01-概述" class="headerlink" title="0x01 概述"></a>0x01 概述</h2><p><strong>(1) 定义</strong></p>
<p>防火墙是位于两个(或多个)网络之间执行<strong>访问控制</strong>的软件和硬件系统，它根据访问控制规则对进出网络的数据流进行<strong>过滤</strong></p>
<p><strong>(2) 示意图</strong></p>
<p><img src="http://pdeise3e3.bkt.clouddn.com/%E7%A4%BA%E6%84%8F%E5%9B%BE.png" alt=""></p>
<p>防火墙在逻辑上是一个<strong>分离器</strong>，一个<strong>限制器</strong>，也是一个<strong>分析器</strong>。它有效地监控了内部网和外部网之间的任何网络活动，保证了内部网络的安全</p>
<p><strong>(3) 数据流处理方式</strong></p>
<ol>
<li><p>允许数据流通过</p>
</li>
<li><p>拒绝数据流通过：通知发送方</p>
</li>
<li><p>将这些数据流丢弃：不通知发送方</p>
</li>
</ol>
<p><strong>(4) firewall 实质</strong></p>
<p>防火墙就是一种能够<strong>限制网络访问</strong>的设备或软件，许多<strong>网络设备</strong>均含有简单的防火墙功能，如路由器、调制解调器、无线基站、IP交换机等；现代<strong>操作系统</strong>中也含有软件防火墙：Windows 系统和Linux系统均自带了软件防火墙，可以通过策略(或规则)定制相关的功能</p>
<hr>
<h2 id="0x02-功能及分类"><a href="#0x02-功能及分类" class="headerlink" title="0x02 功能及分类"></a>0x02 功能及分类</h2><h3 id="1-firewall-功能"><a href="#1-firewall-功能" class="headerlink" title="1. firewall 功能"></a>1. firewall 功能</h3><p><strong>(1) 过滤进、出网络的数据</strong></p>
<p>检查所有进、出数据的细节，并根据事先定义好的策略允许或禁止这些数据进行通信</p>
<p><strong>(2) 管理进、出网络的访问行为</strong></p>
<p>通过将动态的、应用层的过滤能力和认证相结合，实现WWW、FTP和Telnet等广泛的服务的安全支持</p>
<p><strong>(3) 封堵某些禁止的业务</strong></p>
<p>禁止存在安全脆弱性的服务进出网络</p>
<p><strong>(4) 记录通过防火墙的信息内容和活动</strong></p>
<p>审计并记录所有通过防火墙的重要信息，以发现试图的入侵行为</p>
<p><strong>(5) 对网络攻击的检测和告警</strong></p>
<h3 id="2-fierwall-分类"><a href="#2-fierwall-分类" class="headerlink" title="2. fierwall 分类"></a>2. fierwall 分类</h3><p><strong>(1) 按发展历史分类</strong></p>
<p><img src="http://pdeise3e3.bkt.clouddn.com/%E9%98%B2%E7%81%AB%E5%A2%99%E5%8F%91%E5%B1%95.png" alt=""></p>
<p><strong>(2) 根据网络协议栈中的过滤层次</strong></p>
<ol>
<li><p>包过滤防火墙</p>
</li>
<li><p>电路级网关防火墙</p>
</li>
<li><p>应用级网关防火墙</p>
</li>
</ol>
<p><img src="http://pdeise3e3.bkt.clouddn.com/%E5%85%B3%E7%B3%BB.png" alt=""></p>
<p>防火墙工作于OSI模型的<strong>层次越高</strong>，其检查数据包中的<strong>信息就越多</strong>，防火墙所消耗的处理器<strong>工作周期就越长</strong>；防火墙检查的数据包<strong>越靠近OSI模型的上层</strong>，该防火墙结构所提供的<strong>安全保护等级就越高</strong></p>
<hr>
<h2 id="0x03-包过滤防火墙"><a href="#0x03-包过滤防火墙" class="headerlink" title="0x03 包过滤防火墙"></a>0x03 包过滤防火墙</h2><h3 id="1-静态包过滤防火墙"><a href="#1-静态包过滤防火墙" class="headerlink" title="1. 静态包过滤防火墙"></a>1. 静态包过滤防火墙</h3><p>静态包过滤防火墙可以采用<strong>路由器上的过滤模块</strong>来实现</p>
<p><strong>(1) 工作原理</strong></p>
<p>采用一组<strong>过滤规则</strong>对每个数据包进行<strong>检查</strong>，然后根据检查结果确定是<strong>转发</strong>还是<strong>丢弃</strong>该数据包</p>
<p><strong>(2) 包过滤处理过程</strong></p>
<ol>
<li><p><strong>接收</strong>每个到达的数据包</p>
</li>
<li><p>对数据包<strong>采用过滤规则</strong>，对数据包的IP头和传输字段内容进行<strong>检查</strong>。如果数据包的头信息与一组规则匹配，则根据该规则确定是转发还是丢弃该数据包</p>
</li>
<li><p>如果没有规则与数据包头信息匹配，则对数据包施加<strong>默认规则</strong> (通常，防火墙首先默认丢弃所有数据包，然后再逐个执行过滤规则，以加强对数据包的过滤)</p>
</li>
</ol>
<p><strong>(3) 网络位置</strong></p>
<p><img src="http://pdeise3e3.bkt.clouddn.com/%E9%9D%99%E6%80%81.png" alt=""></p>
<ol>
<li><p>静态数据包过滤发生在<strong>网络层</strong>上，也就是OSI模型的第三层上</p>
</li>
<li><p>决定接收还是拒绝一个数据包，取决于对数据包中IP头和协议头等<strong>特定域的检查和判定</strong>。这些特定域包括：①源地址；②目的地址；③应用或协议；④源端口号；⑤目的端口号</p>
</li>
</ol>
<p><strong>(4) ACL (访问控制表单)</strong></p>
<p>在每个包过滤器上，安全管理员要根据企业的安全策略定义一个表单；该规则库包含许多规则，用来指示防火墙应该拒绝还是接收该数据包。在向前转发某个数据包之前，包过滤器防火墙将IP头和TCP头中的<strong>特定域</strong>与规则库中的<strong>规则</strong>逐条进行<strong>比较</strong>。防火墙按照一定的次序<strong>扫描规则库</strong>，直到包过滤器发现一个特定域满足包过滤规则的<strong>特定要求</strong>时，才对数据包做出“接收”或“丢弃”的判决。如果包过滤器<strong>没有发现</strong>有一个规则与该数据包匹配，那么它将对其施加一个<strong>默认规则</strong>。该默认规则在防火墙的规则库中有明确的定义，一般情况下防火墙将不满足规则的数据包丢弃</p>
<p><strong>(5) 安全性分析</strong></p>
<p>决定<strong>包过滤规则的先后次序</strong>是一项很<strong>困难</strong>的事情，包过滤器仅检查数据的IP头和TCP头，它<strong>不能区分真实的IP地址和伪造的IP地址</strong>，若一个伪造的 IP地址满足包过滤规则，并同时满足其他规则的要求，则该数据包将被允许通过</p>
<p><strong>(6) 优缺点</strong></p>
<p><strong>优点</strong></p>
<ol>
<li><p>对网络性能的影响较小 (只是简单地根据地址、协议和端口进行访问控制)</p>
</li>
<li><p>成本较低 (路由器通常集成了简单包过滤的功能)</p>
</li>
</ol>
<p><strong>缺点</strong></p>
<ol>
<li><p>安全性较低 （包过滤防火墙仅工作于网络层，不能对数据包进行更高层的分析和过滤）</p>
</li>
<li><p>缺少状态感知能力 (一些需要动态分配端口的服务需要防火墙打开许多端口，增大了网络的安全风险)</p>
</li>
<li><p>容易遭受IP欺骗攻击 (简单的包过滤功能没有对协议的细节进行分析，可能遭受IP欺骗攻击)</p>
</li>
<li><p>创建访问控制规则比较困难 (须严格区分访问控制规则的先后次序)</p>
</li>
</ol>
<h3 id="2-动态包过滤防火墙"><a href="#2-动态包过滤防火墙" class="headerlink" title="2. 动态包过滤防火墙"></a>2. 动态包过滤防火墙</h3><p>动态包过滤器是最<strong>普遍使用</strong>的一种防火墙技术，既具有很高的<strong>安全性</strong>，又具有完全的<strong>透明性</strong>,可根据网络当前的状态检查数据包，即根据当前所交换的信息<strong>动态调整</strong>过滤规则表</p>
<p><strong>(1) 工作原理</strong></p>
<ol>
<li><p>动态(状态)包过滤器是在静态包过滤防火墙的基础上发展而来，它具有<strong>“状态感知”</strong>的能力</p>
</li>
<li><p><strong>典型</strong>的动态包过滤防火墙工作在<strong>网络层</strong>，，更<strong>先进</strong>的动态包过滤防火墙可以在OSI的<strong>传输层</strong>(第四层)上工作，可以收集更多的状态信息，从而增加过滤的深度</p>
</li>
<li><p>如果数据包满足规则，如数据包的端口号或IP地址是可接受的，则被允许通过。但与普通的包过滤防火墙相比，还有一个不同点：它首先对外出的<strong>数据包身份进行记录</strong>，此后若有相同连接的数据包进入防火墙，它就直接允许这些数据包通过</p>
</li>
<li><p>动态包过滤防火墙直接<strong>对“连接”进行处理</strong>，而不是仅对数据包头信息进行检查，可以用来处理UDP和TCP协议</p>
</li>
<li><p>动态包过滤防火墙需要对已建连接和规则表进行<strong>动态维护</strong>，因此它是动态的和有状态的</p>
</li>
<li><p>典型的动态包过滤防火墙能够感觉到新建连接与已建连接之间的差别。一旦连接建立，它就会将该连接的状态记于RAM中的一个表单中，后续的数据包与RAM表单中的状态信息进行比较</p>
</li>
</ol>
<p><img src="http://pdeise3e3.bkt.clouddn.com/%E5%8A%A8%E6%80%81.png" alt=""></p>
<p><strong>(2) 优缺点归纳</strong></p>
<p><strong>动态包过滤防火墙的优点</strong></p>
<ol>
<li><p>动态包过滤防火墙的安全性优于静态包过滤防火墙</p>
</li>
<li><p>动态包过滤防火墙的“状态感知”能力也使其性能得到了显著提高</p>
</li>
<li><p>如果不考虑所采用的操作系统的成本，动态包过滤防火墙的成本也很低</p>
</li>
</ol>
<p><strong>动态包过滤防火墙的缺点</strong></p>
<ol>
<li><p>由于没有对数据包的净荷部分进行过滤，因此仍然只具有较低的安全性</p>
</li>
<li><p>工作在网络层，仅检查IP头和TCP头，容易遭受伪装IP地址欺骗攻击</p>
</li>
<li><p>难于创建规则，管理员创建规则时必须要考虑规则的先后次序</p>
</li>
<li><p>动态包过滤防火墙无法抵抗半开连接攻击，在连接建立时仅使用两次握手，可导致在DoS/DDoS攻击时因耗尽所有资源而停止响应</p>
</li>
</ol>
<hr>
<h2 id="0x04-电路级网关"><a href="#0x04-电路级网关" class="headerlink" title="0x04 电路级网关"></a>0x04 电路级网关</h2><h3 id="1-工作原理"><a href="#1-工作原理" class="headerlink" title="1. 工作原理"></a>1. 工作原理</h3><p><img src="http://pdeise3e3.bkt.clouddn.com/%E7%94%B5%E8%B7%AF%E7%BA%A7.png" alt=""></p>
<ol>
<li><p>电路级网关又称做线路级网关，当两个主机首次建立TCP连接时，电路级网关在两个主机之间建立一道屏障，电路级网关的作用就好像一台中继计算机，用来在两个连接之间来回地复制数据，也可以记录或缓存数据</p>
</li>
<li><p>采用C/S结构，网关充当了服务器的角色，而内部网络中的主机充当了客户机的角色。当一个客户机希望连接到某个目标服务器时，它首先要连接到中继主机上；然后，中继主机再连接到目标服务器上。对目标服务器来说，该客户机的名称和IP地址是不可见的</p>
</li>
<li><p>当有来自Internet的请求进入时，它作为服务器接收外来请求，并转发请求；当有内部主机请求访问Internet时，它则担当代理服务器的角色。它监视两主机建立连接时的握手信息，如Syn、Ack和序列号等是否合乎逻辑，判定该会话请求是否合法。在有效会话连接建立后，电路级网关仅复制、传递数据，而不进行过滤</p>
</li>
</ol>
<h3 id="2-网络位置"><a href="#2-网络位置" class="headerlink" title="2. 网络位置"></a>2. 网络位置</h3><p><img src="http://pdeise3e3.bkt.clouddn.com/%E7%94%B5%E8%B7%AF%E7%BA%A7%E4%BD%8D%E7%BD%AE.png" alt=""></p>
<ol>
<li><p>电路级网关工作于会话层，即OSI模型的第五层</p>
</li>
<li><p>电路级网关是包过滤防火墙的一种扩展，它除了进行基本的包过滤检查之外，还要增加对连接建立过程中的握手信息及序列号合法性的验证</p>
</li>
<li><p>在打开一条通过防火墙的连接或电路之前，电路级网关要检查和确认TCP及UDP协议会话。因此，电路级网关所检查的数据比静态包过滤防火墙或动态包过滤防火墙所检查的数据更多，安全性也更高</p>
</li>
<li><p>判断是接收还是丢弃一个数据包，取决于对数据包的IP头和TCP头的检查。电路级网关检查的数据包括：①源地址；②目的地址；③应用或协议；④源端口号；⑤目的端口号；⑥握手信息及序列号</p>
</li>
<li><p>与包过滤防火墙类似，电路级网关在转发一数据包之前，首先将数据包的IP头和 TCP头与由管理员定义的规则表相比较，以确定防火墙是将数据包丢弃还是让数据包通过。在可信客户机与不可信主机之间进行TCP握手通信时，仅当SYN标志、ACK标志及序列号符合逻辑时，电路级网关才判定该会话是合法的</p>
</li>
<li><p>如果会话是合法的，包过滤器就开始对规则进行逐条扫描，直到发现其中一条规则与数据包中的有关信息一致。如果包过滤器没有发现适合该数据包的规则，它就会对该数据包施加一条默认规则。在防火墙的规则表中，这条默认规则有明确的定义，通常是指示防火墙将不满足规则的数据包丢弃</p>
</li>
</ol>
<h3 id="3-安全性分析"><a href="#3-安全性分析" class="headerlink" title="3. 安全性分析"></a>3. 安全性分析</h3><ol>
<li><p>电路级网关它与包过滤防火墙一样，工作于OSI模型的低层上，对网络性能的影响较小</p>
</li>
<li><p>一旦电路级网关建立一个连接，任何应用均可以通过该连接运行，电路级网关不能对可信网络与不可信网络之间中继的数据包内容进行检查</p>
</li>
</ol>
<h3 id="4-优缺点归纳"><a href="#4-优缺点归纳" class="headerlink" title="4. 优缺点归纳"></a>4. 优缺点归纳</h3><p><strong>电路级网关优点</strong></p>
<p>(1) 对网络性能有一定程度的影响</p>
<p>(2) 切断了外部网络到防火墙后的服务器直接连接</p>
<p>(3)  比静态或动态包过滤防火墙具有更高的安全性</p>
<p><strong>电路级网关缺点</strong></p>
<p>(1) 不能对数据净荷进行检测，无法抵御应用层的攻击等</p>
<p>(2) 在设计理论上存在局限性，工作层次决定了它无法提供最高的安全性</p>
<p>(3) 当增加新的内部程序或资源时，往往需要对许多电路级网关的代码进行修改</p>
<hr>
<h2 id="0x05-应用级别网关"><a href="#0x05-应用级别网关" class="headerlink" title="0x05 应用级别网关"></a>0x05 应用级别网关</h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h3><p>应用级网关则只能对<strong>特定服务的数据流</strong>进行过滤；应用级网关必须为特定的应用服务编写特定的代理程序，这些程序被称为<strong>“服务代理”</strong>，在网关内部分别扮演客户机代理和服务器代理的角色，当各种类型的应用服务通过网关时，它们必须经过客户机代理和服务器代理的过滤</p>
<h3 id="2-逻辑结构"><a href="#2-逻辑结构" class="headerlink" title="2. 逻辑结构"></a>2. 逻辑结构</h3><p><img src="http://pdeise3e3.bkt.clouddn.com/%E5%BA%94%E7%94%A8%E9%80%BB%E8%BE%91.png" alt=""></p>
<h3 id="3-工作原理"><a href="#3-工作原理" class="headerlink" title="3. 工作原理"></a>3. 工作原理</h3><p>与电路级网关一样，应用级网关截获进出网络的数据包，运行代理程序来回复制和传递通过网关的信息，起着<strong>代理服务器</strong>的作用。它可以避免内网中的可信服务器或客户机与外网中某个不可信主机之间的直接连接</p>
<p><strong>二者区别</strong></p>
<p>(1) 代理是<strong>针对应用</strong>的</p>
<p>(2) 代理对<strong>整个数据包</strong>进行检查，因此能在OSI模型的应用层上对数据包进行过滤</p>
<p><strong>工作层次</strong></p>
<p><img src="http://pcdbq4c2i.bkt.clouddn.com/%E5%BA%94%E7%94%A8%E5%B1%82%E6%AC%A1.png" alt=""></p>
<p>(1) 应用级网关必须针对每个<strong>特定的服务</strong>运行一个特定的代理，它只能对特定服务所生成的数据包进行传递和过滤，如，HTTP代理只能复制、传递和过滤HTTP业务流</p>
<p>(2) 如果一个网络使用了应用级网关防火墙，而且网关上没有运行某些应用服务的代理，那么这些服务的数据包都不能进出网络。例如，如果应用级网关防火墙上运行了FTP和HTTP代理，那么只有这两种服务的数据包才能通过防火墙，所有其他服务的数据包均被禁止 </p>
<p>(3) 应用级网关防火墙上运行的代理程序对数据包进行<strong>逐个检查和过滤</strong>，而不是简单地复制数据让数据包轻易地通过网关</p>
<p>(4) 特定的应用代理检查通过网关的每个数据包，在OSI模型的应用层上验证数据包内容。这些代理可以对应用协议中的特定信息或命令进行过滤，这就是所谓的<strong>关键词过滤或命令字过滤</strong></p>
<p>(5) 应用级网关防火墙所采用的技术叫做<strong>“强应用代理”</strong>。强应用代理不是对用户的整个数据包进行复制，而是在防火墙内部创建一个全新的空数据包。强应用代理将那些可接收的命令或数据，从防火墙外部的原始数据报中复制到防火墙内新创建的数据包中。然后，强应用代理将此新数据包发送给防火墙后面受保护的服务器</p>
<p>(6) 由于应用级网关防火墙对<strong>整个数据包</strong>进行检查，因此它是当前已有的最安全的防火墙结构之一。但是它有一个固有的缺点，那就是<strong>缺乏透明性</strong>，此外，缺乏对新应用、新协议的支持</p>
<h3 id="4-安全性讨论"><a href="#4-安全性讨论" class="headerlink" title="4. 安全性讨论"></a>4. 安全性讨论</h3><p><strong>应用级网关的优点</strong></p>
<p>(1) 在已有的安全模型中<strong>安全性较高</strong> (可以对<strong>服务</strong>(如HTTP、FTP等)的命令字过滤，也可以实现<strong>内容过滤</strong>，甚至可以进行<strong>病毒的过滤</strong>)</p>
<p>(2) 具有<strong>强大的认证功能</strong>。由于应用级网关在<strong>应用层实现认证</strong>，因此它可以实现的认证方式比电路级网关要丰富得多</p>
<p>(3) 具有超强的<strong>日志功能</strong>。<strong>包过滤防火墙</strong>的日志仅能记录<strong>时间、地址、协议、端口</strong>，而应用级网关的日志要明确得多。(例如，应用级网关可以记录用户通过HTTP访问了哪些网站页面、通过FTP上传或下载了什么文件、通过SMTP给谁发送了邮件，甚至邮件的主题、附件等信息，都可以作为日志的内容)</p>
<p>(4) 应用级网关防火墙的<strong>规则配置比较简单</strong>。关注的重点是应用服务，而不必像配置包过滤防火墙还要考虑规则顺序的问题</p>
<p><strong>应用级网关的缺点</strong></p>
<p>(1) 灵活性很差，对每一种应用都需要设置一个代理</p>
<p>(2) 配置烦琐，增加了管理员的工作量</p>
<p>(3) 性能不高,一旦超负荷，就有可能发生停机,从而导致整个网络中断</p>
<hr>
<h2 id="0x06-状态检测防火墙"><a href="#0x06-状态检测防火墙" class="headerlink" title="0x06 状态检测防火墙"></a>0x06 状态检测防火墙</h2><h3 id="1-概述-1"><a href="#1-概述-1" class="headerlink" title="1. 概述"></a>1. 概述</h3><p>状态检测技术是防火墙近几年才应用的新技术，状态检测技术采用的是一种<strong>基于连接的状态检测机制</strong>，将属于同一连接的所有包作为一个数据流的整体看待，构成连接状态表，通过<strong>规则表</strong>与<strong>状态表</strong>的共同配合，对表中的各个连接状态因素加以识别。这里动态连接状态表中的记录可以是<strong>以前的通信信息</strong>，也可以是其他相关<strong>应用程序的信息</strong></p>
<h3 id="2-工作原理"><a href="#2-工作原理" class="headerlink" title="2. 工作原理"></a>2. 工作原理</h3><p>先进的状态检测防火墙读取、分析和利用了全面的<strong>网络通信信息和状态</strong></p>
<p><strong>(1) 通信信息：即所有7层协议的当前信息</strong> </p>
<p>防火墙的检测模块位于操作系统的<strong>内核</strong>，在网络层之下，能在数据包到达网关操作系统之前对它们进行分析。防火墙先在<strong>低协议层</strong>上<strong>检查</strong>数据包是否满足企业的安全策略，对于满足的数据包，再从更<strong>高协议层</strong>上进行<strong>分析</strong>)</p>
<p><strong>(2) 通信状态：即以前的通信信息</strong> </p>
<p>状态检测防火墙在<strong>状态表</strong>中保存以前的通信信息，<strong>记录</strong>从受保护网络发出的数据包的<strong>状态信息</strong>，如IP请求的服务器地址和端口，然后，防火墙根据该表内容对返回<strong>受保护</strong>网络的数据包进行分析判断，这样，只有响应受保护网络请求的数据包才被放行。对于UDP或RPC等<strong>无连接的协议</strong>，检测模块可<strong>创建虚会话信息</strong>用来进行跟踪</p>
<p><strong>(3) 应用状态：即其他相关应用的信息</strong> </p>
<p>状态检测模块能够<strong>理解并学习</strong>各种协议和应用，以支持各种最新的应用，它比代理服务器支持的协议和应用要多得多；并且，它能从应用程序中<strong>收集状态信息</strong>并存入状态表中，以供其他应用或协议做检测策略。例如，已经通过防火墙认证的用户可以通过防火墙访问其他授权的服务</p>
<p><strong>(4) 操作信息：即在数据包中能执行逻辑运算或数学运算的信息</strong></p>
<p>状态监测技术采用强大的<strong>面向对象</strong>的方法，基于通信信息、通信状态、应用状态等多方面因素，利用灵活的表达式形式，结合安全规则、应用识别知识、状态关联信息及通信数据，构造更<strong>复杂</strong>的、更<strong>灵活</strong>的、满足用户<strong>特定</strong>安全要求的策略规则</p>
<h3 id="3-安全性讨论"><a href="#3-安全性讨论" class="headerlink" title="3. 安全性讨论"></a>3. 安全性讨论</h3><p><strong>状态检测防火墙优点</strong></p>
<p>(1) 具备动态包过滤的所有优点，同时具有更高的安全性</p>
<p>(2) 没有打破客户/服务器模型</p>
<p>(3) 提供集成的动态(状态)包过滤功能</p>
<p>(4) 当以动态包过滤模式运行时，其速度很快</p>
<p><strong>状态检测防火墙缺陷</strong></p>
<p>(1) 由于状态检测引擎采用单线程进程，此设计将对防火墙的性能产生很大影响</p>
<p>(2) 没有打破客户/服务器结构会产生不可接受的安全风险，攻击者可以直接与受保护的服务器建立连接</p>
<p>(3) 如果实现方案依赖于操作系统的Inetd守护进程，其并发连接数量将受到严重限制，从而不能满足当今网络对高并发连接数量的要求</p>
<hr>
<h2 id="0x07-切换代理"><a href="#0x07-切换代理" class="headerlink" title="0x07 切换代理"></a>0x07 切换代理</h2><h3 id="1-工作原理-1"><a href="#1-工作原理-1" class="headerlink" title="1. 工作原理"></a>1. 工作原理</h3><p>切换代理(Cutoff Proxy)实际上是动态(状态)包过滤器和一个电路级代理的结合。切换代理<strong>首先起电路级代理的作用</strong>，以验证RFC建议的三步握手，然后再<strong>切换到动态包过滤</strong>的工作模式下。因此，切换代理首先工作于OSI的会话层，即第5层；当连接完成后，再切换到动态包过滤模式，即工作于OSI的第3层</p>
<h3 id="2-工作过程"><a href="#2-工作过程" class="headerlink" title="2. 工作过程"></a>2. 工作过程</h3><p><img src="http://pcdbq4c2i.bkt.clouddn.com/%E5%88%87%E6%8D%A2%E4%BB%A3%E7%90%86.png" alt=""></p>
<h3 id="3-安全性讨论-1"><a href="#3-安全性讨论-1" class="headerlink" title="3. 安全性讨论"></a>3. 安全性讨论</h3><p>(1) 切换代理与传统的电路级代理不同：电路级代理能在连接持续期间打破客户/服务器模式，而切换代理却不能。远端的客户机与防火墙后面受保护的服务器之间仍然能够建立直接的连接</p>
<p>(2) 如果安全策略规定需要对一些基本的服务进行认证并检查三步握手，而且不需要打破客户/服务器模式，那么切换代理就是一个非常合适的选择。切换代理绝不等同于电路级代理，因为在建立连接之后的通信期间，它并未打破客户/服务器的工作模式</p>
<h3 id="4-优点与缺陷"><a href="#4-优点与缺陷" class="headerlink" title="4. 优点与缺陷"></a>4. 优点与缺陷</h3><p><strong>切换代理优点</strong></p>
<p>(1) 与传统的电路级网关相比，它对网络性能造成的影响要小</p>
<p>(2) 由于对三步握手进行了验证，所以降低了IP欺骗的风险</p>
<p><strong>切换代理缺陷</strong></p>
<p>(1) 它不是一个电路级网关</p>
<p>(2) 仍然具有动态包过滤器遗留的许多缺陷</p>
<p>(3) 由于没有检查数据包的净荷部分，因此具有较低的安全性</p>
<p>(4) 难于创建规则(受先后次序的影响)</p>
<p>(5) 安全性不及传统的电路级网关</p>
<hr>
<h2 id="0x08-防火墙体系结构"><a href="#0x08-防火墙体系结构" class="headerlink" title="0x08 防火墙体系结构"></a>0x08 防火墙体系结构</h2><h3 id="1-堡垒主机-Bastion-Host"><a href="#1-堡垒主机-Bastion-Host" class="headerlink" title="1. 堡垒主机(Bastion Host)"></a>1. 堡垒主机(Bastion Host)</h3><p><strong>(1) 概念</strong></p>
<p>堡垒主机(Bastion Host)是一种配置了较为全面的安全防范措施的网络上的计算机，它为网络间的通信提供了一个<strong>阻塞点</strong>。通常堡垒主机可以用作应用级和电路级网关的<strong>平台</strong>，是一个组织机构网络安全的中心主机</p>
<p><strong>(2) 特征</strong></p>
<ol>
<li><p>堡垒主机硬件平台运行较为安全的操作系统，成为可信任的系统</p>
</li>
<li><p>只有网络管理员认为必要的服务才会安装在堡垒主机上。这些服务包含了代理服务，如Telnet，DNS，FTP，SMTP以及用户认证等</p>
</li>
<li><p>当允许一个用户访问代理服务时，堡垒主机可能会要求进行额外认证。另外，每一个代理服务都可能需要相应的鉴别机制( Authentication)</p>
</li>
<li><p>每一个代理都只能支持标准应用服务命令集中的一个子集</p>
</li>
<li><p>每一个代理只允许访问指定主机的通信。这意味着每一个代理通过对所用的网络流量、每一个连接及其持续时间记录日志，保留了详细的审计信息。审计日志对检测和终止入侵者极为重要</p>
</li>
<li><p>每一个代理模块都是一个为网络安全设计的一个很小的软件包</p>
</li>
<li><p>代理之间相互独立</p>
</li>
<li><p>代理通常无需进行磁盘访问，不需要读取初始配置文件。使得入侵者很难在主机上安装Trojan horse、sniffers或其他危险的文件</p>
</li>
<li><p>堡垒主机是一个组织机构网络安全的中心主机。堡垒主机是由网络管理员严密监视的，堡垒主机软件和系统的安全情况应该定期地进行审查，对访问记录应进行查看，以防潜在的安全漏洞和对堡垒主机的试探性攻击</p>
</li>
</ol>
<h3 id="2-典型体系结构"><a href="#2-典型体系结构" class="headerlink" title="2. 典型体系结构"></a>2. 典型体系结构</h3><p><strong>(1) 屏蔽主机模式</strong></p>
<p><img src="http://pcdbq4c2i.bkt.clouddn.com/%E5%B1%8F%E8%94%BD%E4%B8%BB%E6%9C%BA%E6%A8%A1%E5%BC%8F.png" alt=""></p>
<p>1.屏蔽主机模式防火墙(Screened Firewall)由<strong>包过滤路由器</strong>和<strong>堡垒主机</strong>组成。在这种模式下，<strong>所有的网络流量</strong>都必须通过堡垒主机</p>
<ul>
<li><p>对于来自外部网络的网络流量，只有发往堡垒主机的IP数据包才被允许通过</p>
</li>
<li><p>对于来自内部网络的网络流量，只有来自堡垒主机的IP数据包才被允许通过</p>
</li>
</ul>
<p>2.屏蔽主机模式防火墙的实质就是<strong>包过滤</strong>和<strong>代理服务功能</strong>的结合。堡垒主机担任了身份鉴别和代理服务的功能。这样的配置更加安全</p>
<ul>
<li><p>首先，这种配置能够实现数据包级过滤和应用级过滤，在定义安全策略时有相当的灵活性</p>
</li>
<li><p>其次，在入侵者威胁到内部网络的安全以前，必须能够“穿透”两个独立的系统（包过滤路由器和堡垒主机）</p>
</li>
<li><p>这种配置在对Internet进行直接访问时，有更大的灵活性。例如，内部网络中有一个公共信息服务器，如Web服务器，这时，可以配置路由器允许网络流量在信息服务器和Internet之间传输</p>
</li>
<li><p>单宿主机模式存在一个缺陷：一旦过滤路由器遭到破坏，堡垒主机就可能被越过，使得内部网络完全暴露</p>
</li>
</ul>
<p><strong>(2) 双宿/多宿主机模式</strong></p>
<p><img src="http://pcdbq4c2i.bkt.clouddn.com/%E5%A4%9A%E5%AE%BF%E4%B8%BB.png" alt=""></p>
<ol>
<li><p>双宿/多宿主机模式防火墙 (Dual-homed/MultiHomedFirewall)，又称为双宿/多宿网关防火墙</p>
</li>
<li><p>它是一种拥有两个或多个连接到不同网络上的网络接口的防火墙。通常用一台装有两块或多块网卡的堡垒主机作为防火墙，每块网卡各自与受保护网和外部网连接</p>
</li>
<li><p>该模式下，堡垒主机关闭了IP转发功能，其网关功能是通过提供代理服务而不是通过 IP转发来实现的。显然只有特定类型的协议请求才能被代理<br>服务处理。于是，网关采用了“缺省拒绝”策略以得到很高的安全性</p>
</li>
<li><p>这种体系结构的防火墙简单明了，易于实现，成本低，能够为内外网提供检测、认证、日志等功能</p>
</li>
<li><p>这种结构也存在弱点，一旦黑客侵入堡垒主机并打开其IP转发功能，则任何网上用户均可随意访问内部网络。因此，双宿/多宿网关防火墙对不可信任的外部主机的访问必须进行严格的身份验证</p>
</li>
</ol>
<p><strong>(3) 屏蔽子网模式</strong></p>
<p>与前面几种配置模式相比，屏蔽子网模式防火墙(Screened Subnet Mode Firewall) 是最为安全的一种配置模式。它采用了两个包过滤路由器：一个位于堡垒主机和外部网络(Internet)之间；另一个位于堡垒主机和内部网络之间。该配置模式在内部网与外部网络之间建立了一个被隔离的子网</p>
<p><img src="http://pcdbq4c2i.bkt.clouddn.com/%E5%B1%8F%E8%94%BD%E5%AD%90%E7%BD%91.png" alt=""></p>
<ol>
<li><p>周边防御网络是位于内部网络与外部网络之间的一个安全子网，分别和内外两个路由器相连。这个子网被定义为“非军事区”(demilitarized zone)网络，这一网络所受到的威胁不会影响到内部网络</p>
</li>
<li><p>可以将堡垒主机、Web服务器、E-mail服务器等公用服务器放在非军事区网络中，将重要的数据放在内部网服务器上。内部网络和外部网络均可访问屏蔽子网，但禁止它们穿过屏蔽子网通信。在这一配置中，内网增加了一台内部包过滤路由器，该路由器与外部路由器的过滤规则完全不同，它只允许源于堡垒主机的数据包进入</p>
</li>
<li><p>这种防火墙安全性好，但成本高。即使外部路由器和堡垒主机被入侵者控制，内部网络仍受到内部包过滤路由器的保护</p>
</li>
</ol>
<hr>
<h2 id="0x09-防火墙缺陷及发展"><a href="#0x09-防火墙缺陷及发展" class="headerlink" title="0x09 防火墙缺陷及发展"></a>0x09 防火墙缺陷及发展</h2><h3 id="1-防火墙缺陷"><a href="#1-防火墙缺陷" class="headerlink" title="1. 防火墙缺陷"></a>1. 防火墙缺陷</h3><p>(1) 防火墙不能防范不经由防火墙的攻击</p>
<p>如果允许从受保护网内部不受限制的向外拨号，一些用户可以形成与Internet的直接的SLIP或PPP连接，从而绕过防火墙，造成一个潜在的后门攻击渠道</p>
<p>(2) 防火墙目前还不能防止感染了病毒的软件或文件的传输，只能在每台主机上装反病毒软件</p>
<p>(3) 防火墙不能防止数据驱动式攻击</p>
<p>有些表面看来无害的数据被邮寄或复制到Internet主机上并被执行而发起攻击时，就会发生数据驱动攻击。例如，一种数据驱动的攻击可以使一台主机修改与安全有关的文件，从而使入侵者下一次更容易入侵该系统</p>
<p>(4) 防火墙还存在着安装、管理、配置复杂的缺点，在高流量的网络中，防火墙还容易成为网络的瓶颈</p>
<h3 id="2-发展趋势"><a href="#2-发展趋势" class="headerlink" title="2. 发展趋势"></a>2. 发展趋势</h3><p><strong>(1) 优良的性能</strong></p>
<ul>
<li><p>传统的代理型防火墙虽然可以提供较高级别的安全保护，但是同时它也成为限制网络带宽的瓶颈，极大地制约了在网络中的实际应用。<strong>数据通过率</strong>是表示防火墙性能的参数，由于不同防火墙的不同功能具有不同的工作量和系统资源要求，因此数据在通过防火墙时会产生延时。现在大多数的防火墙产品都支持<strong>NAT功能</strong>，它可以让受防火墙保护的一边的IP地址不至于暴露在没有保护的另一边，但启用NAT后，势必会对防火墙系统性能有所影响。另外防火墙系统中集成的<strong>VPN解决方案</strong>必须是真正的线速运行，否则将成为网络通信的瓶颈</p>
</li>
<li><p>采用复杂的加密算法时，防火墙性能尤为重要</p>
</li>
</ul>
<p><strong>(2) 可扩展的结构和功能</strong></p>
<ul>
<li><p>防火墙系统规模和功能应该能适应内部网络的规模和安全策略的变化，</p>
</li>
<li><p>防火墙除了具有保护网络安全的基本功能外，还提供对VPN的支持，同时还应该具有可扩展的内驻应用层代<br>理。除了支持常见的网络服务以外，还应该能够按照用户的需求提供相应的代理服务</p>
</li>
<li><p>未来的防火墙系统应是一个<strong>可随意伸缩</strong>的<strong>模块化解决方案</strong>，从最为基本的包过滤器到带加密功能的VPN型包过滤器，直至一个独立的应用网关，使用户有充分的余地构建自己所需要的防火墙体系</p>
</li>
</ul>
<p><strong>(3) 简化的安装与管理</strong></p>
<p>将具有非常易于进行配置的图形用户界面，NT防火墙市场的发展证明了这种趋势</p>
<p><strong>(4) 主动过滤</strong></p>
<p>具有内置病毒和内容扫描功能或允许用户将病毒与内容扫描程序进行集成</p>
<p><strong>(5) 防病毒与防黑客</strong></p>
<p>TCP／IP 协议套件中存在的脆弱性使Internet对<strong>拒绝服务攻击</strong>敞开了大门。防火墙厂商一直在尽其可能阻止拒绝服务攻击。像对付序列号预测和IP欺骗这类简单攻击，这些年来已经成为了防火墙工具箱的一部分。像“SYN泛滥”这类更复杂的拒绝服务攻击需要厂商部署更先进的检测和避免方案来对付</p>
<p><strong>(6) 发展联动技术</strong></p>
<p>联动即通过一种<strong>组合</strong>的方式，将不同的技术与防火墙技术进行整合，在提高防火墙自身功能和性能的同时，由其他技术完成防火墙所缺乏的功能，以适应网络安全<strong>整体化、立体化</strong>的要求</p>
<ul>
<li><p>防火墙与<strong>防病毒产品</strong>联动，可以在网关处查杀病毒，将病毒的发作限制在最小的可能</p>
</li>
<li><p>防火墙与<strong>认证系统</strong>联动，可以在制定安全策略时使用强度更大、安全性更高的认证体系</p>
</li>
<li><p>防火墙与<strong>入侵检测系统</strong>联动，可以对网络进行动静结合的保护</p>
</li>
<li><p>防火墙与<strong>日志分析系统</strong>联动</p>
</li>
</ul>
<h3 id="3-趋势总结"><a href="#3-趋势总结" class="headerlink" title="3. 趋势总结"></a>3. 趋势总结</h3><p>未来防火墙技术会全面考虑<strong>网络安全、操作系统安全、应用程序安全、用户的安全、数据安全</strong>，五者综合应用；此外，网络的防火墙产品还将把网络前沿技术，如Web页面超高速缓存、虚拟网络和带宽管理、与其它安全<strong>技术联动</strong>等与其自身结合起来</p>
<hr>
<h2 id="0x0A-防火墙设计及配置"><a href="#0x0A-防火墙设计及配置" class="headerlink" title="0x0A 防火墙设计及配置"></a>0x0A 防火墙设计及配置</h2><p>现代操作系统已经集成了基本的防火墙架构，只需在相关的架构上加入自定义的软件模块，就可以实现高强度的防火墙功能 </p>
<h3 id="1-Firewall-Windows"><a href="#1-Firewall-Windows" class="headerlink" title="1. Firewall-Windows"></a>1. Firewall-Windows</h3><p><img src="http://pcdbq4c2i.bkt.clouddn.com/windows.png" alt=""></p>
<p><strong>(1) 用户级：</strong>SPI接口，包过滤接口</p>
<p><strong>(2) 内核级：</strong>TDI过滤驱动程序，NDIS中间层过滤驱动程序，NDIS过滤钩子驱动程序</p>
<h3 id="2-Firewall-Linux"><a href="#2-Firewall-Linux" class="headerlink" title="2. Firewall-Linux"></a>2. Firewall-Linux</h3><p>(1) Linux kernel 集成了过滤系统</p>
<ul>
<li>2.0 ipfwadm</li>
<li>2.2 ipchains</li>
<li>2.4以上内核：netfilter/iptables</li>
</ul>
<p>(2) 大多数Linux下的防火墙都是在这些过滤系统之上开发设计的。通过LKM注册钩子函数，实现对数据的检测，从而实现自定义的防火墙</p>
<p>(3) 商用防火墙大多在netfilter/iptables上开发</p>
<hr>
<h2 id="0xFF-参考资源"><a href="#0xFF-参考资源" class="headerlink" title="0xFF 参考资源"></a>0xFF 参考资源</h2><ul>
<li><p><a href="https://zh.wikipedia.org/wiki/%E9%98%B2%E7%81%AB%E5%A2%99" target="_blank" rel="noopener">https://zh.wikipedia.org/wiki</a></p>
</li>
<li><p><a href="http://staff.ustc.edu.cn/~billzeng/senis/nis06.pdf" target="_blank" rel="noopener">http://staff.ustc.edu.cn/~billzeng/senis/nis06.pdf</a></p>
</li>
<li><p><a href="https://www.secrss.com/search?keywords=%E9%98%B2%E7%81%AB%E5%A2%99" target="_blank" rel="noopener">https://www.secrss.com/firewall</a></p>
</li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Firewall/" rel="tag"><i class="fa fa-tag"></i> Firewall</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/07/31/Joy/" rel="next" title="Joy-加密流量分析">
                <i class="fa fa-chevron-left"></i> Joy-加密流量分析
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/08/14/VPN技术浅析/" rel="prev" title="VPN技术浅析">
                VPN技术浅析 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Firehacker</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">31</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">23</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/Hackerfire" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:firehafcker@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://firehacker.top/SecBook" target="_blank" title="Gitbook">
                      
                        <i class="fa fa-fw fa-book"></i>Gitbook</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#0x01-概述"><span class="nav-number">1.</span> <span class="nav-text">0x01 概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x02-功能及分类"><span class="nav-number">2.</span> <span class="nav-text">0x02 功能及分类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-firewall-功能"><span class="nav-number">2.1.</span> <span class="nav-text">1. firewall 功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-fierwall-分类"><span class="nav-number">2.2.</span> <span class="nav-text">2. fierwall 分类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x03-包过滤防火墙"><span class="nav-number">3.</span> <span class="nav-text">0x03 包过滤防火墙</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-静态包过滤防火墙"><span class="nav-number">3.1.</span> <span class="nav-text">1. 静态包过滤防火墙</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-动态包过滤防火墙"><span class="nav-number">3.2.</span> <span class="nav-text">2. 动态包过滤防火墙</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x04-电路级网关"><span class="nav-number">4.</span> <span class="nav-text">0x04 电路级网关</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-工作原理"><span class="nav-number">4.1.</span> <span class="nav-text">1. 工作原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-网络位置"><span class="nav-number">4.2.</span> <span class="nav-text">2. 网络位置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-安全性分析"><span class="nav-number">4.3.</span> <span class="nav-text">3. 安全性分析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-优缺点归纳"><span class="nav-number">4.4.</span> <span class="nav-text">4. 优缺点归纳</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x05-应用级别网关"><span class="nav-number">5.</span> <span class="nav-text">0x05 应用级别网关</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-概述"><span class="nav-number">5.1.</span> <span class="nav-text">1. 概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-逻辑结构"><span class="nav-number">5.2.</span> <span class="nav-text">2. 逻辑结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-工作原理"><span class="nav-number">5.3.</span> <span class="nav-text">3. 工作原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-安全性讨论"><span class="nav-number">5.4.</span> <span class="nav-text">4. 安全性讨论</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x06-状态检测防火墙"><span class="nav-number">6.</span> <span class="nav-text">0x06 状态检测防火墙</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-概述-1"><span class="nav-number">6.1.</span> <span class="nav-text">1. 概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-工作原理"><span class="nav-number">6.2.</span> <span class="nav-text">2. 工作原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-安全性讨论"><span class="nav-number">6.3.</span> <span class="nav-text">3. 安全性讨论</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x07-切换代理"><span class="nav-number">7.</span> <span class="nav-text">0x07 切换代理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-工作原理-1"><span class="nav-number">7.1.</span> <span class="nav-text">1. 工作原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-工作过程"><span class="nav-number">7.2.</span> <span class="nav-text">2. 工作过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-安全性讨论-1"><span class="nav-number">7.3.</span> <span class="nav-text">3. 安全性讨论</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-优点与缺陷"><span class="nav-number">7.4.</span> <span class="nav-text">4. 优点与缺陷</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x08-防火墙体系结构"><span class="nav-number">8.</span> <span class="nav-text">0x08 防火墙体系结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-堡垒主机-Bastion-Host"><span class="nav-number">8.1.</span> <span class="nav-text">1. 堡垒主机(Bastion Host)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-典型体系结构"><span class="nav-number">8.2.</span> <span class="nav-text">2. 典型体系结构</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x09-防火墙缺陷及发展"><span class="nav-number">9.</span> <span class="nav-text">0x09 防火墙缺陷及发展</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-防火墙缺陷"><span class="nav-number">9.1.</span> <span class="nav-text">1. 防火墙缺陷</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-发展趋势"><span class="nav-number">9.2.</span> <span class="nav-text">2. 发展趋势</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-趋势总结"><span class="nav-number">9.3.</span> <span class="nav-text">3. 趋势总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x0A-防火墙设计及配置"><span class="nav-number">10.</span> <span class="nav-text">0x0A 防火墙设计及配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Firewall-Windows"><span class="nav-number">10.1.</span> <span class="nav-text">1. Firewall-Windows</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Firewall-Linux"><span class="nav-number">10.2.</span> <span class="nav-text">2. Firewall-Linux</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0xFF-参考资源"><span class="nav-number">11.</span> <span class="nav-text">0xFF 参考资源</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Firehacker</span>

  
</div>


<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>

  <!-- <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>
-->





        







        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'cQ1pKGTukU9T7wK7hVqrFIy0-gzGzoHsz',
        appKey: '6l4mVkOTGKucdJoVS2dNCr0R',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  

  

  

</body>
</html>
